"use strict";(self["webpackChunkruifox_oauth2"]=self["webpackChunkruifox_oauth2"]||[]).push([[40],{4040:function(a,e,t){t.r(e),t.d(e,{default:function(){return A}});t(560);var i=t(8473),l=t(4887),s=t(4188),c=t(5374),r=t(4731);const o=a=>((0,i.dD)("data-v-ef9ea10e"),a=a(),(0,i.Cn)(),a),d={class:"authorize"},n={class:"authorize-header"},u=["src"],v={class:"title"},_={class:"card-top"},h={class:"authorize-detail"},p=o((()=>(0,i._)("div",{class:"detail-left"},null,-1))),w={class:"detail-right"},f=o((()=>(0,i._)("div",{class:"detail-right-title"},"授权单点登录站",-1))),g={class:"detail-right-desc"},y={class:"authorize-detail"},z={class:"detail-left"},k=["src"],m={key:1,class:"iconfont"},b=o((()=>(0,i._)("div",{class:"detail-right"},[(0,i._)("div",{class:"detail-right-title"},"授权后，将获得以下用户数据"),(0,i._)("div",{class:"detail-right-desc"},"获得您的昵称、头像、和其他用户个人信息")],-1))),C={class:"card-bottom"},D={class:"authrize-btns"},q={class:"authrize-link"},I=o((()=>(0,i._)("span",{class:"protocol"}," 锐狐互联网站点服务协议 ",-1))),U={class:"link"},W=o((()=>(0,i._)("div",{id:"form-container"},null,-1)));var x={__name:"Authorize",setup(a){const e=(0,r.tv)(),t=(0,r.yj)(),o=(0,i.Fl)((()=>t.query));console.log(o.value,777);const x=()=>{},F=async()=>{let a=await(0,c.Yh)(o.value);if(a&&200===a.code)try{window.location.href="http://10.10.0.29:8001/oauth2/authorize?client_id="+o.value.client_id+"&response_type="+o.value.response_type+"&redirect_uri="+o.value.redirect_uri+"&scope="+o.value.scope}catch{}finally{console.log(window.location.href,888)}},j=(0,s.iH)({}),A=async()=>{let a=await(0,c.yr)({clientId:o.value.client_id});a&&200===a.code&&(j.value=a.data)};return(0,i.bv)((()=>{window.onerror=function(a,e,t,i,l){console.error("发生错误：",a,l,565656)}})),(0,i.wF)((async()=>{let a=await(0,c.bg)();a.data||e.push({path:"/login",query:t.query}),await A()})),(a,e)=>{const t=(0,i.up)("el-button"),s=(0,i.up)("el-card");return(0,i.wg)(),(0,i.iD)("div",d,[(0,i._)("div",n,[(0,i._)("img",{src:j.value.clientIcon,alt:""},null,8,u),(0,i._)("div",v,(0,l.zw)(j.value.clientName),1)]),(0,i.Wm)(s,{class:"authorize-card"},{default:(0,i.w5)((()=>[(0,i._)("div",_,[(0,i._)("div",h,[p,(0,i._)("div",w,[f,(0,i._)("div",g,"想要获取您的账户"+(0,l.zw)(j.value.account)+"的权限",1)])]),(0,i._)("div",y,[(0,i._)("div",z,[j.value.avatar?((0,i.wg)(),(0,i.iD)("img",{key:0,src:j.value.avatar,alt:""},null,8,k)):((0,i.wg)(),(0,i.iD)("i",m,""))]),b])]),(0,i._)("div",C,[(0,i._)("div",D,[(0,i.Wm)(t,{type:"danger",size:"large",onClick:x},{default:(0,i.w5)((()=>[(0,i.Uk)("拒绝")])),_:1}),(0,i.Wm)(t,{type:"primary",size:"large",onClick:F},{default:(0,i.w5)((()=>[(0,i.Uk)("同意")])),_:1})]),(0,i._)("div",q,[(0,i.Uk)(" 授权后表明你已同意"),I,(0,i._)("p",U,(0,l.zw)(j.value.redirect_uri),1)])])])),_:1}),W])}}},F=t(5312);const j=(0,F.Z)(x,[["__scopeId","data-v-ef9ea10e"]]);var A=j}}]);
//# sourceMappingURL=40.5fd1901b.js.map